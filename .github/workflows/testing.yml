name: testing 

on:
  workflow_call:
    secrets:
      GROEP_2_SLACK_WEBHOOK:
        required: true
  pull_request:

jobs:
  codeql:
    uses: ZuydUniversity/B2C6_B2D_Backend/.github/workflows/testing_codeql.yml@Groep-2
  linter:
    uses: ZuydUniversity/B2C6_B2D_Backend/.github/workflows/testing_linter.yml@Groep-2
  notify:
    needs: [codeql, linter]
    #needs: codeql
    if: ${{ failure() }}
    uses:
      ZuydUniversity/B2C6_B2D_IAS/.github/workflows/send_slack_webhook.yml@groep-2
    secrets: inherit
    with:
      SLACK_WEBHOOK_TEXT: ":rotating_light: [BACKEND] <https://github.com/ZuydUniversity/B2C6_B2D_Backend/edit/Groep-2/.github/workflows/testing.yml|testing phase> **FAILED**: <${{ github.event.pull_request.html_url || github.event.head_commit.url }}|commit url> :rotating_light:"
